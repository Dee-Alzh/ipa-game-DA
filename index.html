<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IPA Spectrogram Game</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="templatemo-neural-style.css" rel="stylesheet">

  <style>
    body { font-family: sans-serif; background:#111; color:#eee; text-align:center; }
    .game { margin:40px auto; width:500px; }
    img { max-width:100%; border:3px solid #444; border-radius:10px; background:#000; }
    input { font-size:20px; padding:6px; margin:5px; width:50px; text-align:center; }
    button { font-size:18px; margin-top:10px; padding:6px 14px; }
    .result { font-size:24px; margin-top:15px; height:30px; }
    .ipa-keyboard { margin-top:15px; display:flex; flex-wrap:wrap; gap:6px; justify-content:center; }
    .ipa-key { padding:6px 10px; border:1px solid #555; border-radius:6px;
               cursor:pointer; background:#222; color:#eee; font-size:20px; }
    .ipa-key:hover { background:#444; }


  </style>
</head>
<body>
  <!-- Background / decorations -->
  <div class="neural-background"></div>
  <div class="geometric-shapes">
    <div class="shape"></div><div class="shape"></div><div class="shape"></div><div class="shape"></div>
  </div>
  <div class="neural-lines">
    <div class="neural-line"></div><div class="neural-line"></div><div class="neural-line"></div>
  </div>

  <!-- Game -->
  <div class="game">
    <h1>Guess the IPA sound</h1>
    <img id="spectro" src="" alt="spectrogram">
    
    <!-- Multiple inputs go here -->
    <div id="answer-area"></div>
    
    <div>
      <button onclick="check()">Check</button>
      <button onclick="next()">Next</button>
    </div>
    
    <div class="result" id="result"></div>
  </div>

  <!-- IPA Keyboard -->
  <div class="ipa-keyboard" id="ipaKeys"></div>

  <script>
    // IPA symbols for keyboard
    const ipaSymbols = [
      "ŋ","ɲ","ʃ","ʒ","θ","ð","ʔ","ʎ","ʁ","ɣ","χ","ħ","ʕ",
      "ʊ","ʏ","ɑ","œ","ɒ","ə","ʌ","ɛ","ɐ","ɔ","ɪ","æ"
    ];

    let activeInput = null; // store last focused input

    // Render keyboard
    const kb = document.getElementById("ipaKeys");
    ipaSymbols.forEach(sym => {
      const key = document.createElement("div");
      key.className = "ipa-key";
      key.textContent = sym;
      key.onclick = () => {
        if (activeInput) {
          activeInput.value += sym;
          activeInput.focus();
        }
      };
      kb.appendChild(key);
    });

    // Game items (each IPA word is array of sounds)
    const items = [
      { img: "ae.png", ipa: ["æ"] },
      { img: "scripta.png", ipa: ["ɑ"] },
      { img: "backscripta.png", ipa: ["ɒ"] },
      { img: "epl.png", ipa: ["ɛ"] },
      { img: "caretA.png", ipa: ["ʌ"] },
      { img: "e.png", ipa: ["e"] },
      { img: "i.png", ipa: ["i"] },
      { img: "horseshoe.png", ipa: ["ʊ"] },
      { img: "o.png", ipa: ["o"] },
      { img: "openo.png", ipa: ["ɔ"] },
      { img: "smalli.png", ipa: ["ɪ"] },
      { img: "sch.png", ipa: ["ə"] },
      { img: "u.png", ipa: ["u"] },
      { img: "feed.png", ipa: ["f","i","d"] },
      { img: "boo.png", ipa: ["b","u"] },
      { img: "feet.png", ipa: ["f","i","t"] }
    ];

    let index = 0;

    function showItem() {
      const item = items[index];
      document.getElementById("spectro").src = item.img;

      // Clear old inputs
      const inputArea = document.getElementById("answer-area");
      inputArea.innerHTML = "";

      // Create inputs for each IPA symbol
      item.ipa.forEach((_, i) => {
        const inp = document.createElement("input");
        inp.className = "answer-box";
        inp.setAttribute("maxlength", "3");
        inp.style.width = "50px";

        // track focus
        inp.addEventListener("focus", () => activeInput = inp);

        // enter → go to next box
        inp.addEventListener("keydown", (e) => {
          if (e.key === "Enter") {
            e.preventDefault();
            const next = inputArea.children[i+1];
            if (next) {
              next.focus();
            } else {
              check(); // if last box, check automatically
            }
          }
        });

        inputArea.appendChild(inp);
      });

      document.getElementById("result").textContent = "";
      activeInput = null;
    }

    function check() {
      const item = items[index];
      const inputs = document.querySelectorAll(".answer-box");
      let correctAll = true;

      inputs.forEach((inp, i) => {
        if (inp.value.trim() === item.ipa[i]) {
          inp.style.border = "2px solid lime";   // ✅ correct
        } else {
          inp.style.border = "2px solid red";    // ❌ wrong
          correctAll = false;
        }
      });

      if (correctAll) {
        document.getElementById("result").textContent = "✅ Correct word!";
        document.getElementById("result").style.color = "lime";
      } else {
        document.getElementById("result").textContent = "❌ Some sounds wrong";
        document.getElementById("result").style.color = "red";
      }
    }

    function next() {
      index = (index + 1) % items.length;
      showItem();
    }

    // Init first
    window.onload = showItem;
  </script>

  <script src="templatemo-neural-scripts.js"></script>
</body>
</html>









